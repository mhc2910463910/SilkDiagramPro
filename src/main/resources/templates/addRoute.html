<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>添加旅游服务</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width , initial-scale=1 , shrink-to-fit=no">
    <link rel="stylesheet" th:href="@{/static/bootstrap5/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/static/css/nav.css}">
    <link rel="stylesheet" th:href="@{/static/css/left-menu.css}">
    <link rel="stylesheet" th:href="@{/static/css/content.css}">
    <link rel="stylesheet" th:href="@{/static/css/jquery-labelauty.css}">
    <script th:src="@{/static/bootstrap5/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/static/js/jquery.min.js}" ></script>
    <script src="../static/editormd/js/editormd.min.js"></script>
    <link rel="stylesheet" href="../static/editormd/css/editormd.min.css">
    <link rel="stylesheet" href="../static/bootstrap-fileinput/css/fileinput.min.css">
    <script src="../static/bootstrap-fileinput/js/fileinput.min.js"></script>
    <style>
        #info{
            height: 100%;
        }
        #content{
            height: 500px;
        }
        #test-editormd{
            width: 100%;
            height: 500px;
            padding: 0px;
        }
        #test-editormd li{
            padding: 0px;
        }
        #test-editormd li a{
            width: 30px;
            height:30px;
            padding: 0px;
        }
        .dowebok  { list-style-type: none;}
        .dowebok li { display: inline-block;}
        .dowebok li label{
            padding: 2px;
        }
        input.labelauty + label { font: 12px "Microsoft Yahei";}
        .dowebok{
            padding: 0px;
            margin: 1px;
        }
    </style>
</head>
<body>

<!--左侧菜单-->
<div th:replace="leftMenu :: left-menu"></div>
<!--中心内容-->
<div id="content" >
     <!--  页面主体-->
    <div id="info">
        <form id="editmd" method="post"  enctype="multipart/form-data" action="/insertRoute">
            <!--        标题-->
            <div class="input-group mb-3">
                <span class="input-group-text" id="basic-addon1">标题</span>
                <input type="text" class="form-control" name="name" placeholder="" aria-label="" aria-describedby="basic-addon1">
            </div>
            <!--        分类-->
            <div class="input-group mb-3">
                <span class="input-group-text" id="basic-addon2">地区</span>
                <input type="text" class="form-control" name="position" placeholder="" aria-label="" aria-describedby="basic-addon2">
            </div>
            <!--        标签-->
            <div class="input-group mb-3">
                <span class="input-group-text" id="basic-addon3">价格</span>
                <input type="text" class="form-control" name="price" placeholder="" aria-label="" aria-describedby="basic-addon3">
            </div>
            <!--        标签-->
                <input id="fileinput" name="fileinput" type="file" multiple accept="image/*" class="file-loading">
            <!--    编辑器-->
            <div id="test-editormd">
                <textarea style="display:none;" name="content" id="textContent"></textarea>
                <textarea id="text" class="editormd-html-textarea" name="content-html"></textarea>
            </div>
            <!--        按钮-->
            <div style="float: right;">
<!--                <button type="button" class="btn btn-primary">保存为草稿</button>-->
                <button type="submit" class="btn btn-success" >发布</button>
            </div>
        </form>
    </div>
</div>
<!--编辑器-->
<script type="text/javascript">
    var testEditor;
    $(function() {
        testEditor = editormd("test-editormd", {
            width: "100%",
            height: "500px",
            syncScrolling : "single",
            path    : "/static/editormd/lib/",
            imageUpload: true,
            imageFormats: ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
            imageUploadURL: "/saveFile",
            //这个配置在simple.html中并没有，但是为了能够提交表单，使用这个配置可以让构造出来的HTML代码直接在第二个隐藏的textarea域中，方便post提交表单。
            saveHTMLToTextarea: true
            // previewTheme : "dark"
        });
    });
</script>
<!--表单提交-->
<script>
    $("#fileinput").fileinput({
        language: 'zh',
        uploadUrl:  "../static/upload",
        uploadAsync: true,
        allowedFileExtensions: ['jpg', 'gif', 'png', 'jpeg'],
        dropZoneEnabled: true,//是否显示拖拽区域,
        enctype: 'multipart/form-data',
        showUpload: true, //显示批量上传按钮--%>
        showCaption: true,//是否显示标题
        browseClass: "btn btn-primary", //按钮样式
        theme:"explorer-fa",
        maxFileCount:10,
        minFileCount:1,
        showUpload:true,
        maxFileSize:0
    });
    //上传成功后执行
    $("#fileinput").on("fileuploaded", function (event, data, previewId, index) {
        console.log(data.response.msg);
    });
</script>
</body>
</html>